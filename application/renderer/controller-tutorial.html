<!doctype html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ayuda del Mando - StormStore</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" type="image/png" href="../assets/app.png" />
</head>

<body>
  <aside class="sidebar">
    <div class="sidebar-top">
      <div class="brand-container">
        <h2>StormStore</h2>
        <p class="version" id="app-version"></p>
      </div>

      <button id="back-btn" class="back-button">
        ← Volver
      </button>

      <ul id="categories"></ul>
    </div>

    <div class="sidebar-footer">
      <p class="studio">StormGamesStudios</p>

      <div class="footer-icons">
        <button data-link="https://github.com/acierto-incomodo">
          <img src="../assets/icons/github.svg" alt="GitHub" />
        </button>
        <button data-link="https://stormgamesstudios.vercel.app/">
          <img src="../assets/icons/web.svg" alt="Web" style="filter: invert(1)" />
        </button>
        <button data-link="https://www.curseforge.com/members/creper1125463">
          <img src="../assets/icons/curseforge.svg" alt="CurseForge" />
        </button>
        <button id="open-updates">
          <img src="../assets/icons/update.svg" alt="Actualizaciones" />
        </button>
        <button id="open-licenses">
          <img src="../assets/icons/license.svg" alt="Licencias" />
        </button>
        <button id="open-info">
          <img src="../assets/icons/info.svg" alt="Información" />
        </button>
      </div>
    </div>
  </aside>

  <main class="dashboard-layout">
    <div class="main-header">
      <h1>Ayuda del Mando</h1>
      <div class="window-controls">
        <button class="control-btn" id="open-big-picture" title="Big Picture">
          <img src="../assets/icons/big-picture.svg" alt="Big Picture" style="width: 20px; height: 20px;" />
        </button>
        <button class="control-btn" id="min-btn">─</button>
        <button class="control-btn" id="max-btn">◻</button>
        <button class="control-btn close" id="close-btn">✕</button>
      </div>
    </div>
    <div class="updates-container">
        <div class="tutorial-container animate-enter">
            <p style="text-align: center; color: var(--md-sys-color-on-surface-variant); margin-bottom: 30px;">
                Estos son los controles principales para navegar en el modo Big Picture con un mando.
            </p>
            
            <div class="controls-list">
                <!-- Navegación General -->
                <div class="control-item">
                    <div class="control-icons">
                        <img src="../assets/gamepad/xbox/Xbox_Left_stick.svg" alt="Joystick Izquierdo">
                        <img src="../assets/gamepad/playstation/PlayStation_Directional_button.svg" alt="Cruceta">
                    </div>
                    <div class="control-desc">
                        <strong>Navegar</strong>
                        <span>Mover selección en la cuadrícula y menús.</span>
                    </div>
                </div>

                <!-- Aceptar / Iniciar -->
                <div class="control-item">
                    <div class="control-icons">
                        <img src="../assets/gamepad/xbox/XboxA.svg" alt="Botón A">
                        <span>/</span>
                        <img src="../assets/gamepad/playstation/PlayStation_button_X.svg" alt="Botón Cruz">
                    </div>
                    <div class="control-desc">
                        <strong>Aceptar / Iniciar</strong>
                        <span>Inicia el juego seleccionado o confirma una opción.</span>
                    </div>
                </div>

                <!-- Atrás / Menú -->
                <div class="control-item">
                    <div class="control-icons">
                        <img src="../assets/gamepad/xbox/XboxB.svg" alt="Botón B">
                        <span>/</span>
                        <img src="../assets/gamepad/playstation/PlayStation_button_C.svg" alt="Botón Círculo">
                    </div>
                    <div class="control-desc">
                        <strong>Atrás / Abrir Menú</strong>
                        <span>Abre el menú principal o vuelve atrás en los menús.</span>
                    </div>
                </div>

                <!-- Menú Home -->
                <div class="control-item">
                    <div class="control-icons">
                        <img src="../assets/gamepad/playstation/Xbox_Logo.svg" alt="Botón Home Xbox">
                        <img src="../assets/gamepad/playstation/Xbox_Menu_button.svg" alt="Botón Home Xbox">
                        <span>/</span>
                        <img src="../assets/gamepad/playstation/PlayStation_button_Home.svg" alt="Botón Home PS">
                        <img src="../assets/gamepad/playstation/PlayStation_4_Options_button.svg" alt="Botón Home PS">
                    </div>
                    <div class="control-desc">
                        <strong>Menú Principal</strong>
                        <span>Abre y cierra el menú principal.</span>
                    </div>
                </div>

                 <!-- Ayuda -->
                 <div class="control-item">
                    <div class="control-icons">
                        <img src="../assets/gamepad/xbox/Xbox_Share_button.svg" alt="Botón Share Xbox">
                        <span>/</span>
                        <img src="../assets/gamepad/playstation/PlayStation_4_Share_button.svg" alt="Botón Share PS">
                    </div>
                    <div class="control-desc">
                        <strong>Ayuda</strong>
                        <span>Muestra esta pantalla de ayuda.</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
  </main>

  <script>
    document.addEventListener("DOMContentLoaded", async () => {
      // Cargar versión
      const version = await window.api.getAppVersion();
      document.getElementById("app-version").textContent = `v${version}`;

      // Botón volver
      document.getElementById("back-btn").addEventListener("click", () => {
        window.history.back();
      });

      // Footer links
      document.querySelectorAll(".footer-icons button[data-link]").forEach((btn) => {
        btn.addEventListener("click", () => {
          const url = btn.getAttribute("data-link");
          window.open(url);
        });
      });
      document.getElementById("open-updates")?.addEventListener("click", () => {
        window.location.href = "updates.html";
      });
      document.getElementById("open-big-picture")?.addEventListener("click", () => {
        window.api.openBigPicture();
      });
      document.getElementById("open-licenses")?.addEventListener("click", () => {
        window.location.href = "licencias.html";
      });
      document.getElementById("open-info")?.addEventListener("click", () => {
        window.location.href = "info.html";
      });

      // Controles de ventana
      document.getElementById("min-btn")?.addEventListener("click", () => window.api.minimizeWindow());
      document.getElementById("close-btn")?.addEventListener("click", () => window.api.closeWindow());

      const maxBtn = document.getElementById("max-btn");
      if (maxBtn) {
        maxBtn.addEventListener("click", () => window.api.maximizeWindow());

        window.api.isMaximized().then((isMax) => {
          if (isMax) maxBtn.textContent = "❐";
        });

        window.api.onWindowMaximized(() => (maxBtn.textContent = "❐"));
        window.api.onWindowRestored(() => (maxBtn.textContent = "◻"));
      }
    });
  </script>
  <script src="gamepad-global.js"></script>
</body>

</html>